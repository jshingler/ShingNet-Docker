# ───────────────────────────────
# Identity Provider
# ───────────────────────────────
provider               = "oidc"
provider_display_name  = "Keycloak"
oidc_issuer_url        = "https://jshingler.asuscomm.com/auth/realms/ShingNet"
login_url              = "https://jshingler.asuscomm.com/auth/realms/ShingNet/protocol/openid-connect/auth"
redeem_url             = "https://jshingler.asuscomm.com/auth/realms/ShingNet/protocol/openid-connect/token"
validate_url           = "https://jshingler.asuscomm.com/auth/realms/ShingNet/protocol/openid-connect/userinfo"

#client_id              = 
#client_secret          = 
redirect_url           = "https://jshingler.asuscomm.com/oauth2/callback"
code_challenge_method  = "S256"
scope                  = "openid email profile"
skip_provider_button   = true
reverse_proxy          = true

# ───────────────────────────────
# Network & Runtime
# ───────────────────────────────
http_address           = "0.0.0.0:4180"
metrics_address        = "0.0.0.0:4181"
upstreams              = []  # <── empty array (critical change)

# ───────────────────────────────
# Cookie & Session Settings
# ───────────────────────────────
#cookie_secret          = 
cookie_secure          = true
cookie_samesite        = "none"
cookie_domains         = ["jshingler.asuscomm.com"]
#cookie_domains         = ["jshingler.asuscomm.com", ".jshingler.asuscomm.com"]
cookie_path            = "/"
whitelist_domains      = [".jshingler.asuscomm.com", "jshingler.asuscomm.com"]

# ───────────────────────────────
# Auth Request Headers
# ───────────────────────────────
set_xauthrequest       = true
pass_access_token      = true
email_domains          = ["*"]
# Forward headers so Grafana receives authenticated identity
pass_authorization_header = true
set_authorization_header  = true

# ───────────────────────────────
# Skip auth redirect for internal checks
# ───────────────────────────────
#skip_auth_routes = ["/oauth2/auth"]

# ───────────────────────────────
# Logging
# ───────────────────────────────
request_logging        = true
standard_logging       = true
auth_logging           = true

